<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="Cache-Control" content="private">
    <title>Title</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <link href="css/stylecontrolpanel.css" rel="stylesheet" type="text/css">
    <link href="css/style.css" rel="stylesheet" type="text/css">
    <script src="js/controlpanel.js"></script>
    <script src="js/createtask.js"></script>
    <script src="js/checkanswers.js"></script>
    <script>
        $(document).on('click', '.get-date', function(){
            $('#show-all-tasks').trigger('click');
           //alert($(this).attr('data-value'))
            var data = $('.qwe').text().split(' ');
            var answer = [];
            if(data[0] === 'Январь'){
                answer = [$(this).attr('data-value'), 1, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Февраль'){
                answer = [$(this).attr('data-value'), 2, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Март'){
                answer = [$(this).attr('data-value'), 3, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Апрель'){
                answer = [$(this).attr('data-value'), 4, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Май'){
                answer = [$(this).attr('data-value'), 5, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Июнь'){
                answer = [$(this).attr('data-value'), 6, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Июль'){
                answer = [$(this).attr('data-value'), 7, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Август'){
                answer = [$(this).attr('data-value'), 8, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Сентябрь'){
                answer = [$(this).attr('data-value'), 9, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Октябрь'){
                answer = [$(this).attr('data-value'), 10, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Ноябрь'){
                answer = [$(this).attr('data-value'), 11, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            if(data[0] === 'Декабрь'){
                answer = [$(this).attr('data-value'), 12, data[1]];
                $('#date-day').attr('value', answer[0]);
                $('#date-month').attr('value', answer[1]);
                $('#date-year').attr('value', answer[2]);
            }
            setTimeout(function() {
                $('#show-tasks-by-date').trigger('click');
            }, 150);

        });
    </script>
</head>
<body>

<section class="navbar-default">
    <section class="container">
        <center><form class="navbar-form">
                <select id="select-groups" class="form-control"></select>
                <input type="button" id="show-all-tasks" class="button button-success" value="отобразить все работы">
                <input type="text" id="date-day" class="form-control" size="3" placeholder="День" maxlength="2">
                <input type="text" id="date-month" class="form-control" size="3" placeholder="Месяц" maxlength="2">
                <input type="text" id="date-year" class="form-control" size="3" placeholder="Год" maxlength="4">
                <input type="button" id="show-tasks-by-date" class="button button-success"
                       value="отобразить работы по дате">
                <input type="text" id="task-name" class="form-control" placeholder="Название работы">
                <input type="button" id="show-task-by-name" class="button button-success"
                       value="отобразить по имени работы">
                <input type="button" id="log-out" class="button button-danger" value="выйти"/>
        </form></center>
    </section>
</section>

<section id="container">
    <section class="section-left">
        <section class="yellow-sec-left">
            <form class="form-horizontal" style="padding:6px;" id="make-control-task" onsubmit="return false">
                <section class="form-group" style="padding: 1%">
                    <label for="num-of-questions"><b>Вопросы:</b></label>
                    <section class="width90">
                        <input type="text" class="form-control" id="num-of-questions" pattern="[0-9]"
                               placeholder="Количество">
                    </section>
                </section>
                <section class="form-group" style="padding: 1%">
                    <label for="num-of-options"><b>Варианты:</b></label>
                    <section class="width90">
                        <input type="text" class="form-control" id="num-of-options" pattern="[0-9]"
                               placeholder="Количество">
                    </section>
                </section>
                <section class="form-group" style="padding: 1%">
                    <label for="time-of-questions"><b>Время:</b></label>
                    <section class="width90">
                        <input type="text" class="form-control" id="time-of-questions" pattern="[0-9]{1,3}"
                               placeholder="В минутах">
                    </section>
                </section>
                <section class="form-group">
                    <section>
                        <button type="submit" class="button button-success" style="margin:3% 0 5% 2%">Создать контрольную
                        </button>
                    </section>
                </section>
            </form>
        </section>
        <section class="yellow-sec-left" style="margin-top: 5%;">
            <form class="form-horizontal" style="padding:6px;" id="change-password" onsubmit="return false">
                <section class="form-group" style="padding: 1%">
                    <label for="num-of-options"><b>Новый пароль:</b></label>
                    <section class="width90">
                        <input type="password" class="form-control" id="password" pattern="[A-Za-zА-Яа-яЁё0-9\D]{3,24}"
                               placeholder="Пароль">
                    </section>
                </section>
                <section class="form-group" style="padding: 1%">
                    <label for="time-of-questions"><b>Повторите пароль:</b></label>
                    <section class="width90">
                        <input type="password" class="form-control" id="password2" pattern="[A-Za-zА-Яа-яЁё0-9\D]{3,24}"
                               placeholder="Пароль">
                    </section>
                </section>
                <section class="form-group">
                    <section>
                        <button type="submit" class="button button-success" id="btn-change-password" style="margin:3% 0 5% 2%">Сменить пароль</button>
                    </section>
                </section>
            </form>
        </section>
        <section class="yellow-sec-left" style="margin-top: 5%;">
            <style>
                #calendar2 {
                    width: 100%;
                    font: monospace;
                    line-height: 1.2em;
                    font-size: 15px;
                    text-align: center;
                }
                #calendar2 thead tr:last-child {
                    font-size: small;
                    color: rgb(85, 85, 85);
                }
                #calendar2 thead tr:nth-child(1) td:nth-child(2) {
                    color: rgb(50, 50, 50);
                }
                #calendar2 thead tr:nth-child(1) td:nth-child(1):hover, #calendar2 thead tr:nth-child(1) td:nth-child(3):hover {
                    cursor: pointer;
                }
                #calendar2 tbody td {
                    color: rgb(44, 86, 122);
                }
                #calendar2 tbody td:nth-child(n+7), #calendar2 .holiday {
                    color: rgb(231, 140, 92);
                }
                #calendar2 tbody td.today {
                    background: rgb(220, 0, 0);
                    color: #fff;
                }
            </style>

            <table id="calendar2">
                <thead>
                <tr><td>‹<td colspan="5" class="qwe"><td>›
                <tr><td>Пн<td>Вт<td>Ср<td>Чт<td>Пт<td>Сб<td>Вс
                <tbody>
            </table>

            <script>
                function Calendar2(id, year, month) {
                    var Dlast = new Date(year,month+1,0).getDate(),
                            D = new Date(year,month,Dlast),
                            DNlast = new Date(D.getFullYear(),D.getMonth(),Dlast).getDay(),
                            DNfirst = new Date(D.getFullYear(),D.getMonth(),1).getDay(),
                            calendar = '<tr>',
                            month=["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"];
                    if (DNfirst != 0) {
                        for(var  i = 1; i < DNfirst; i++) calendar += '<td>';
                    }else{
                        for(var  i = 0; i < 6; i++) calendar += '<td>';
                    }
                    for(var  i = 1; i <= Dlast; i++) {
                        if (i == new Date().getDate() && D.getFullYear() == new Date().getFullYear() && D.getMonth() == new Date().getMonth()) {
                            calendar += '<td class="today get-date" data-value='+i+'>' + i;
                        }else{
                            calendar += '<td class="get-date" data-value='+i+'>' + i;
                        }
                        if (new Date(D.getFullYear(),D.getMonth(),i).getDay() == 0) {
                            calendar += '<tr>';
                        }
                    }
                    for(var  i = DNlast; i < 7; i++) calendar += '<td>&nbsp;';
                    document.querySelector('#'+id+' tbody').innerHTML = calendar;
                    document.querySelector('#'+id+' thead td:nth-child(2)').innerHTML = month[D.getMonth()] +' '+ D.getFullYear();
                    document.querySelector('#'+id+' thead td:nth-child(2)').dataset.month = D.getMonth();
                    document.querySelector('#'+id+' thead td:nth-child(2)').dataset.year = D.getFullYear();
                    if (document.querySelectorAll('#'+id+' tbody tr').length < 6) {  // чтобы при перелистывании месяцев не "подпрыгивала" вся страница, добавляется ряд пустых клеток. Итог: всегда 6 строк для цифр
                        document.querySelector('#'+id+' tbody').innerHTML += '<tr><td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;<td>&nbsp;';
                    }
                }
                Calendar2("calendar2", new Date().getFullYear(), new Date().getMonth());
                // переключатель минус месяц
                document.querySelector('#calendar2 thead tr:nth-child(1) td:nth-child(1)').onclick = function() {
                    Calendar2("calendar2", document.querySelector('#calendar2 thead td:nth-child(2)').dataset.year, parseFloat(document.querySelector('#calendar2 thead td:nth-child(2)').dataset.month)-1);
                }
                // переключатель плюс месяц
                document.querySelector('#calendar2 thead tr:nth-child(1) td:nth-child(3)').onclick = function() {
                    Calendar2("calendar2", document.querySelector('#calendar2 thead td:nth-child(2)').dataset.year, parseFloat(document.querySelector('#calendar2 thead td:nth-child(2)').dataset.month)+1);
                }
            </script>
        </section>
    </section>
    <section id="section-left" class="section-center">
        <section class="panel panel-primary">
            <section class="panel-heading"><b>FAQ:</b></section>
            <section class="panel-body">
                Для того, что бы создать работу, то первоначально её следует настроить в левой части окна, указав
                количество
                вопросов, вариантов и время на выполнение работы.<br/><br>
                Для того, что бы увидеть работы, которые выполняла определенная группа, следует выбрать её в выпадающем
                списке.<br><br>
                Для того, что бы увидеть работы за нужное число или по имени введите в нужные поля сверху дату или
                название работы и нажмите соответствующую кнпоку.<br><br>
                Для того, что бы проверить работу следует в правой части нажать на нужную задачу, а затем выбрать ту,
                которую следует проверить.<br><br>
            </section>
        </section>
    </section>
    <section class="section-right" style="width: 25%;">
        <section id="treeview1" class="treeview">
            <ul class="list-group">
                <section id="sectionRight"></section>
            </ul>
        </section>
    </section>
</section>

</body>
</html>